---
- name: VM Configuration Playbook
  hosts: localhost
  gather_facts: no
  environment:
    OS_USERNAME: admin
    OS_PASSWORD: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      66373262346338396430326464623264333731316463626438653266323333323861383131363538
      3464343131393533333839656361366165663135646333620a663464396232386466336362653462
      65383032356234393235353931373730626464363163316231666661353938613464363530393764
      6137653062643738650a353139343436656335393535366632346463383766366262353634336662
      6434
    OS_AUTH_URL: "http://10.11.51.161:5000/v3"
    OS_PROJECT_NAME: admin
    OS_USER_DOMAIN_NAME: Default
    OS_PROJECT_DOMAIN_NAME: Default
    OS_IDENTITY_API_VERSION: 3
  tasks:
    - include_tasks: createTestServer.yml
    - include_tasks: attach_floatingIP.yml
    - include_tasks: wait_for_ssh.yml